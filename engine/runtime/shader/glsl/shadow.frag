#version 450

// ============================================================================
// 阴影贴图生成片段着色器
// ============================================================================
/**
 * @file shadow.frag
 * @brief 阴影贴图生成专用片段着色器
 * @details 用于阴影贴图渲染通道的片段着色器
 *          
 *          阴影贴图原理：
 *          - 阴影贴图只需要深度信息，不需要颜色输出
 *          - GPU会自动将片段的深度值写入深度缓冲区
 *          - 深度值表示从光源到表面的距离
 *          
 *          深度值计算：
 *          - 深度值 = gl_FragCoord.z
 *          - 范围：[0.0, 1.0]（在Vulkan中）
 *          - 0.0 = 近裁剪面，1.0 = 远裁剪面
 *          
 *          性能优化：
 *          - 空的片段着色器最大化渲染性能
 *          - 避免不必要的纹理采样和计算
 *          - 专注于深度写入，提高阴影贴图生成效率
 */

// ============================================================================
// 主函数 - 深度写入
// ============================================================================
/**
 * @brief 阴影贴图片段处理
 * @details 空的片段着色器，仅依赖GPU自动深度写入
 *          
 *          工作流程：
 *          1. 片段通过深度测试
 *          2. GPU自动将gl_FragCoord.z写入深度缓冲区
 *          3. 不输出任何颜色信息
 *          
 *          深度精度考虑：
 *          - 使用32位浮点深度格式（D32_SFLOAT）获得最佳精度
 *          - 避免深度精度不足导致的阴影失真（shadow acne）
 *          - 合理设置光源的近远裁剪面距离
 */
void main() {
    // ========================================================================
    // 自动深度写入
    // ========================================================================
    
    // 空的片段着色器 - 深度值会被GPU自动写入
    // 
    // GPU会自动执行以下操作：
    // 1. 计算片段的深度值：depth = gl_FragCoord.z
    // 2. 执行深度测试：if (depth < depthBuffer[x][y])
    // 3. 写入深度缓冲区：depthBuffer[x][y] = depth
    // 
    // 这个深度值后续会在主渲染通道中用于阴影计算：
    // - 将片段位置变换到光源空间
    // - 采样阴影贴图获取存储的深度值
    // - 比较当前深度与存储深度，判断是否处于阴影中

}